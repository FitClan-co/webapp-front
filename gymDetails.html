<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Gym Details</title>
    <style>
        .full-clickable {
            cursor: pointer;
            display: block;
            position: relative;
            text-decoration: none;
            color: inherit;
        }

        .full-clickable .masonry__item {
            position: relative;
            z-index: 1;
        }

        .full-clickable .masonry__item::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 0;
        }
    </style>
    <link rel="stylesheet" href="css/float.css">
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
    <script src="https://unpkg.com/html5-qrcode"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Site Description Here">
    <link href="css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/stack-interface.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/socicon.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/lightbox.min.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/flickity.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/iconsmind.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/jquery.steps.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/theme.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/custom.css" rel="stylesheet" type="text/css" media="all" />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:200,300,400,400i,500,600,700%7CMerriweather:300,300i" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <a id="start"></a>
    <div class="nav-container">
        <div class="bar bg--white bar--sm visible-sm visible-xs">
            <div class="container">
                <div class="row">
                    <div class="col-3 col-md-2">
                        <a href="index.html">
                            <img class="logo logo-dark" alt="logo" src="img/Logos/logo fitclan-10 copy.png" />
                            <img class="logo logo-light" alt="logo" src="img/Logos/logo fitclan-10 copy.png" />
                        </a>
                    </div>
                    <div class="col-9 col-md-10 text-right">
                        <a href="#" class="hamburger-toggle" data-toggle-class="#menu5;hidden-xs hidden-sm">
                            <i class="icon icon--sm stack-interface stack-menu"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <nav class="bar bar--sm bg--white hidden-xs hidden-sm" id="menu5">
            <div class="container">
                <div class="row">
                    <div class="col-lg-1 hidden-xs hidden-sm">
                        <div class="bar__module">
                            <a href="index.html">
                                <img class="logo logo-dark" alt="logo" src="img/Logos/logo fitclan-10 copy.png" />
                                <img class="logo logo-light" alt="logo" src="img/Logos/logo fitclan-10 copy.png" />
                        </div>
                    </div>
                    <div class="col-lg-5">
                        <div class="bar__module">
                            <ul class="menu-horizontal">
                                <li>
                                    <a href="index.html">
                                        Home
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <br>
                    <div class="col-lg-6 text-right text-left-xs">
                        <div class="bar__module">
                            <a class="btn btn--secondry btn--sm type--uppercase" id="loginLogoutBtn" href="login.html">
                                <span class="btn__text" id="loginLogoutText">Login or Signup</span>
                            </a>
                        
                        </div>
                        <div class="bar__module">
                            <a class="btn btn--primary btn--sm type--uppercase" href="#">
                                <span class="btn__text">
                                    Subscribe
                                </span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    </div>
    <div class="main-container">
        <section class="unpad">
            <article>
                <div class="imagebg text-center height-60" data-overlay="5">
                    <div class="background-image-holder" id="cover-photo">
                        <img alt="background" src="" />
                    </div>
                    <div class="container pos-vertical-center">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="article__title">
                                    <h1 id="gym-name">Gym Name</h1>
                                    <span id="genders-allowed">Allowed Genders: Mixed</span><br>
                                    <span id="area">Area: Maadi</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pos-absolute pos-bottom col-12 text-center">
                        <div class="article__author">
                            <img alt="Image" id="gym-logo" src="" />
                        </div>
                    </div>
                </div>
                <div>
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-md-10 col-lg-8">
                                <div class="article__body">
                                    <h5>Description:</h5>
                                    <p id="description">
                                        Gold's Gym is: paradigm piverate innovate affordances user centered design personas pair programming Steve Jobs iterate earned media. Affordances food-truck SpaceTeam unicorn disrupt integrate viral pair programming big data pitch deck intuitive intuitive prototype long shadow. Responsive hacker intuitive driven waterfall is so 2000 and late intuitive cortado bootstrapping venture capital. Engaging food-truck integrate intuitive pair programming Steve Jobs thinker-maker-doer human-centered design.
                                    </p>
                                    <div class="col-md-12">
                                        <h5>Gym Gallery</h5>
                                        <div class="swiper-container">
                                            <div class="swiper-wrapper" id="gym-gallery">
                                                <!-- Slides will be populated here -->
                                            </div>
                                            <!-- Add Pagination -->
                                            <div class="swiper-pagination"></div>
                                            <!-- Add Navigation -->
                                            <div class="swiper-button-next"></div>
                                            <div class="swiper-button-prev"></div>
                                        </div>
                                    </div>
                                    <br>
                                    <section>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <h5>Amenities:</h5>
                                                <ul class="bullets" id="amenities-list">
                                                    <li>Sauna</li>
                                                    <li>Pool</li>
                                                    <li>Jacuzzi</li>
                                                    <li>Martial Arts</li>
                                                </ul>
                                            </div>
                                        </div>
                                        <br>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <h5>Working Hours:</h5>
                                                <table class="border--round table--alternate-row" id="working-hours-table">
                                                    <thead>
                                                        <tr>
                                                            <th>Day</th>
                                                            <th>Hours</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <!-- Working hours will be populated here -->
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </section>
                                    <div class="row text-center justify-content-center col-lg-12">
                                        <div class="col-lg-12">
                                            <a class="align-items-center btn btn--primary btn--icon" href="#" id="gym-location">
                                                <span class="btn__text"><i class="icon-Location-2"></i>Gym Location</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </article>
        </section>
        <div class="floating-button" id="qrButton">
            <img src="img/qr-scan-icon-512x512-9bsp061y.png" alt="QR Code">
        </div>
        <footer class="footer-3 text-center-xs space--xs">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <img alt="Image" class="logo" src="img/Logos/logo fitclan-10 copy.png" />
                        <ul class="list-inline list--hover">
                            <li class="list-inline-item">
                                <a href="#">
                                    <span class="type--fine-print">+201201248331</span>
                                </a>
                            </li>
                            <li class="list-inline-item">
                                <a href="#">
                                    <span class="type--fine-print">info@fitclan.co</span>
                                </a>
                            </ul>
                        </div>
                        <div class="col-md-6 text-right text-center-xs">
                            <ul class="social-list list-inline list--hover">
                                <li class="list-inline-item">
                                    <a href="#">
                                        <i class="socicon socicon-linkedin icon icon--xs"></i>
                                    </a>
                                </li>
                                <li class="list-inline-item">
                                    <a href="#">
                                        <i class="socicon socicon-facebook icon icon--xs"></i>
                                    </a>
                                </li>
                                <li class="list-inline-item">
                                    <a href="#">
                                        <i class="socicon socicon-instagram icon icon--xs"></i>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6"></div>
                        <div class="col-md-6 text-right text-center-xs">
                            <span class="type--fine-print">&copy;<span class="update-year"></span> Fitclan.co</span>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
        <!-- <a class="back-to-top inner-link" href="#start" data-scroll-class="100vh:active">
            <i class="stack-interface stack-up-open-big"></i>
        </a> -->
        <div id="qr-reader" style="display: none;"></div>
        <script src="js/float.js"></script>
        <script src="js/jquery-3.1.1.min.js"></script>
        <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
        <script src="js/easypiechart.min.js"></script>
        <script src="js/parallax.js"></script>
        <script src="js/typed.min.js"></script>
        <script src="js/datepicker.js"></script>
        <script src="js/isotope.min.js"></script>
        <script src="js/ytplayer.min.js"></script>
        <script src="js/lightbox.min.js"></script>
        <script src="js/granim.min.js"></script>
        <script src="js/jquery.steps.min.js"></script>
        <script src="js/countdown.min.js"></script>
        <script src="js/twitterfetcher.min.js"></script>
        <script src="js/spectragram.min.js"></script>
        <script src="js/smooth-scroll.min.js"></script>
        <script src="js/scripts.js"></script>
        <script src="qr.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const params = new URLSearchParams(window.location.search);
                const gymId = params.get('id');
                const apiEndpoint = `https://fitclan.app/gymsweb/${gymId}`;

                fetch(apiEndpoint)
                    .then(response => response.json())
                    .then(gym => {
                        document.getElementById('gym-name').textContent = gym.name;
                        document.getElementById('genders-allowed').textContent = `Allowed Genders: ${gym.gendersAllowed}`;
                        document.getElementById('area').textContent = `Area: ${gym.area}`;
                        document.getElementById('description').textContent = gym.description;
                        document.getElementById('gym-logo').src = gym.logo;
                        // document.getElementById('cover-photo').children[0].src = gym.coverPhoto;
                        document.getElementById('cover-photo').style.backgroundImage = `url(${gym.coverPhoto})`;

                        // Update amenities list
                        const amenitiesList = document.getElementById('amenities-list');
                        amenitiesList.innerHTML = '';
                        gym.amenities.forEach(amenity => {
                            const li = document.createElement('li');
                            li.textContent = amenity;
                            amenitiesList.appendChild(li);
                        });

                        // Update working hours table
                        const workingHoursTableBody = document.getElementById('working-hours-table').querySelector('tbody');
                        workingHoursTableBody.innerHTML = ''; // Clear any existing rows
                        const daysOfWeek = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
                        gym.workingHours.forEach((hours, index) => {
                            const tr = document.createElement('tr');
                            const tdDay = document.createElement('td');
                            tdDay.textContent = daysOfWeek[index];
                            const tdHours = document.createElement('td');
                            tdHours.textContent = hours;
                            tr.appendChild(tdDay);
                            tr.appendChild(tdHours);
                            workingHoursTableBody.appendChild(tr);
                        });

                        // Update gym gallery
                        const gymGallery = document.getElementById('gym-gallery');
                        gymGallery.innerHTML = '';
                        gym.photos.forEach(photo => {
                            const swiperSlide = document.createElement('div');
                            swiperSlide.classList.add('swiper-slide');
                            const img = document.createElement('img');
                            img.alt = 'Image';
                            img.src = photo;
                            swiperSlide.appendChild(img);
                            gymGallery.appendChild(swiperSlide);
                        });

                        // Initialize the Swiper slider with card effect
                        new Swiper('.swiper-container', {
                            loop: true,
                            pagination: {
                                el: '.swiper-pagination',
                                clickable: true,
                            },
                            navigation: {
                                nextEl: '.swiper-button-next',
                                prevEl: '.swiper-button-prev',
                            },
                            effect: 'cards',
                            grabCursor: true,
                        });

                        // Update gym location link
                        const gymLocationLink = document.getElementById('gym-location');
                        gymLocationLink.href = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(gym.location)}`;
                    })
                    .catch(error => console.error('Error fetching gym details:', error));




                    const loginLogoutBtn = document.getElementById('loginLogoutBtn');
                const loginLogoutText = document.getElementById('loginLogoutText');
                const token = localStorage.getItem('token');
                if (token) {
                    loginLogoutText.textContent = 'Logout';
                    loginLogoutBtn.addEventListener('click', function(event) {
                        event.preventDefault();
                        fetch('https://fitclan.app/auth/logout', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'Authorization': `Bearer ${token}`
                            }
                        })
                        .then(response => response.json())
                        .then(data => {
                            if (data.message === 'Logged out successfully') {
                                localStorage.removeItem('token');
                                window.location.href = 'login.html';
                            } else {
                                alert('Logout failed: ' + data.message);
                            }
                        })
                        .catch(error => console.error('Error during logout:', error));
                    });
                } else {
                    loginLogoutBtn.addEventListener('click', function() {
                        window.location.href = 'login.html';
                    });
                    // const qrButton = document.getElementById('qrButton');
                    // qrButton.style.display = 'none';
                }
            });
            
        </script>
    </body>
</html>
